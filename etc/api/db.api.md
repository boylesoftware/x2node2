## API Report File for "@x2node/db"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { Service } from '@x2node/common';

// @public
export class Database {
    constructor(opts: DatabaseOptions);
    readonly shape: DatabaseShape;
}

// @public
export interface DatabaseConnection {
    beginTransaction(mode: TxMode): Promise<void>;
    endTransaction(res: TxResolve): Promise<void>;
    executeQuery<R>(sql: string, parser: QueryResultParser<R>): Promise<R>;
    executeStatement(sql: string): Promise<StatementResult>;
    release(): void;
    readonly sessionId: string;
}

// @public
export interface DatabaseConnectionProvider extends Service {
    readonly dialect: SQLDialect;
    getConnection(): Promise<DatabaseConnection>;
}

// @public
export interface DatabaseMonitor {
    release(): void;
}

// @public
export interface DatabaseMonitorProvider extends Service {
    getMonitor(con: DatabaseConnection): Promise<DatabaseMonitor>;
}

// @public
export interface DatabaseOptions {
    connectionProvider: DatabaseConnectionProvider;
    monitorProvider: DatabaseMonitorProvider;
    recordTypes: RecordType[];
}

// @public
export interface DatabaseShape {
    readonly recordTypes: ReadonlyArray<RecordType>;
}

// @public
export const DB_CONNECTION_PROVIDER_SERVICE = "databaseConnectionProvider";

// @public
export const DB_MONITOR_PROVIDER_SERVICE = "databaseMonitorProvider";

// @public
export const LOG_CATEGORY = "X2_DB";

// @public
export interface QueryResultParser<R> {
    addRow(row: {
        [field: string]: unknown;
    }): void;
    getResult(): R;
}

// @public
export interface RecordType {
    // (undocumented)
    new (...args: any): any;
}

// @public
export interface SQLDialect {
    booleanLiteral(val: boolean): string;
    stringLiteral(val: string): string;
}

// @public
export abstract class StandardSQLDialect implements SQLDialect {
    booleanLiteral(val: boolean): string;
    stringLiteral(val: string): string;
}

// @public
export interface StatementResult {
    readonly generatedId?: number;
    readonly numAffectedRows: number;
}

// @public
export enum TxMode {
    ReadOnly = 1,
    ReadWrite = 0
}

// @public
export enum TxResolve {
    Commit = 0,
    Rollback = 1
}


```
